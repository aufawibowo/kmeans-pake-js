<!DOCTYPE <!DOCTYPE html>
<html>
<head>
    <title >Klasifikasi KNN</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>
<body style="background-color:#a385a8">
    <button type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#exampleModal">
        Lihat Tabel
    </button>
    <img src="bunga.png" class="img-responsive" style="position:fixed;bottom:0;width:100%;">     
    <div class="container h-100"> 
            <div class="row h-100 justify-content-center align-items-center">
                <form class="col-6">
                    <h1 style="color:#443047">Test Akurasi</h1>
                    <div class="form-group">
                        <input type="number" class="form-control"  placeholder="Presentase Test Case" id="persen" min="1" max="60">
                    </div>
                    <div class="form-group">
                        <input type="number" class="form-control"  placeholder="K" id="K">
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control"  placeholder="Jawaban Disini" id="jawab" readonly>
                    </div>
                    <div class="row">
                        <div class="col-sm text-center">
                        </div>
                        <div class="col-sm text-center">
                            <button class="btn btn-dark" type="button" primary onclick="tesakurasi();">Calculate</button>
                        </div>
                        <div class="col-sm text-center" id="apaini">
                                <button class="btn btn-dark" type="button" data-toggle="modal" data-target="#modalhasil" disabled>Lihat Test Case</button>
                        </div>
                        <div class="col-sm text-center">
                        </div>
                    </div>
                </form>  
                <form class="col-6">
                    <h1 style="color:#443047">Prediksi</h1>
                    <div class="form-group">
                        <input type="number" class="form-control" placeholder="Sepal Length" id="sl">
                    </div>
                    <div class="form-group">
                        <input type="number" class="form-control"  placeholder="Sepal Width" id="sw">
                    </div>
                    <div class="form-group">
                        <input type="number" class="form-control"  placeholder="Petal Length" id="pl">
                    </div>
                    <div class="form-group">
                        <input type="number" class="form-control"  placeholder="Petal Width" id="pw">
                    </div>
                    <div class="form-group">
                        <input type="number" class="form-control"  placeholder="K" id="k">
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control"  placeholder="Jawaban Disini" id="jawab1" readonly>
                    </div>
                    <div class="row">
                        <div class="col-sm text-center">
                        </div>
                        <div class="col-sm text-center">
                            <button class="btn btn-dark" type="button" primary onclick="hitung();">Calculate</button>
                        </div>
                        <div class="col-sm text-center" id="apaini2">
                                <button class="btn btn-dark" type="button" data-toggle="modal" data-target="#datak" disabled>Lihat K Data</button>
                        </div>
                        <div class="col-sm text-center">
                        </div>
                    </div>
                </form>  
            </div>  
        </div>
<!-- MODALLLLLLL -->
        <div class="modal fade bd-example-modal-lg" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Data Set</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                    <table class="table">
                        <thead>
                          <tr>
                            <th scope="col">#</th>
                            <th scope="col">Sepal Length</th>
                            <th scope="col">Sepal Width</th>
                            <th scope="col">Petal Length</th>
                            <th scope="col">Petal Width</th>
                            <th scope="col">Class</th>
                          
                          </tr>
                        </thead>
                        <tbody id="dalamtabel">                   
                        </tbody>
                      </table>
                </div>
              </div>
            </div>
          </div>

<!-- MODAL HASIL -->
    <div class="modal fade bd-example-modal-lg" id="modalhasil" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Test Case</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Sepal Length</th>
                        <th scope="col">Sepal Width</th>
                        <th scope="col">Petal Length</th>
                        <th scope="col">Petal Width</th>
                        <th scope="col">Class</th>
                        <th scope="col">Prediksi</th>
                      </tr>
                    </thead>
                    <tbody id="hahaha">        
                    </tbody>
                  </table>
            </div>
          </div>
        </div>
      </div>
<!-- MODAL DATAK -->
    <div class="modal fade bd-example-modal-lg" id="datak" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">K Data</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body">
                <table class="table">
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Distance</th>
                        <th scope="col">ID</th>
                        <th scope="col">Class</th>
                    </tr>
                    </thead>
                    <tbody id="hahaha2">        
                    </tbody>
                </table>
            </div>
        </div>
        </div>
    </div>


<!-- END -->

</body>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>


<script type="text/javascript">
    var irises = [
        [5.1,3.5,1.4,0.2,"Iris-setosa"],
        [4.9,3.0,1.4,0.2,"Iris-setosa"],
        [4.7,3.2,1.3,0.2,"Iris-setosa"],
        [4.6,3.1,1.5,0.2,"Iris-setosa"],
        [5.0,3.6,1.4,0.2,"Iris-setosa"],
        [5.4,3.9,1.7,0.4,"Iris-setosa"],
        [4.6,3.4,1.4,0.3,"Iris-setosa"],
        [5.0,3.4,1.5,0.2,"Iris-setosa"],
        [4.4,2.9,1.4,0.2,"Iris-setosa"],
        [4.9,3.1,1.5,0.1,"Iris-setosa"],
        [5.4,3.7,1.5,0.2,"Iris-setosa"],
        [4.8,3.4,1.6,0.2,"Iris-setosa"],
        [4.8,3.0,1.4,0.1,"Iris-setosa"],
        [4.3,3.0,1.1,0.1,"Iris-setosa"],
        [5.8,4.0,1.2,0.2,"Iris-setosa"],
        [5.7,4.4,1.5,0.4,"Iris-setosa"],
        [5.4,3.9,1.3,0.4,"Iris-setosa"],
        [5.1,3.5,1.4,0.3,"Iris-setosa"],
        [5.7,3.8,1.7,0.3,"Iris-setosa"],
        [5.1,3.8,1.5,0.3,"Iris-setosa"],
        [5.4,3.4,1.7,0.2,"Iris-setosa"],
        [5.1,3.7,1.5,0.4,"Iris-setosa"],
        [4.6,3.6,1.0,0.2,"Iris-setosa"],
        [5.1,3.3,1.7,0.5,"Iris-setosa"],
        [4.8,3.4,1.9,0.2,"Iris-setosa"],
        [5.0,3.0,1.6,0.2,"Iris-setosa"],
        [5.0,3.4,1.6,0.4,"Iris-setosa"],
        [5.2,3.5,1.5,0.2,"Iris-setosa"],
        [5.2,3.4,1.4,0.2,"Iris-setosa"],
        [4.7,3.2,1.6,0.2,"Iris-setosa"],
        [4.8,3.1,1.6,0.2,"Iris-setosa"],
        [5.4,3.4,1.5,0.4,"Iris-setosa"],
        [5.2,4.1,1.5,0.1,"Iris-setosa"],
        [5.5,4.2,1.4,0.2,"Iris-setosa"],
        [4.9,3.1,1.5,0.1,"Iris-setosa"],
        [5.0,3.2,1.2,0.2,"Iris-setosa"],
        [5.5,3.5,1.3,0.2,"Iris-setosa"],
        [4.9,3.1,1.5,0.1,"Iris-setosa"],
        [4.4,3.0,1.3,0.2,"Iris-setosa"],
        [5.1,3.4,1.5,0.2,"Iris-setosa"],
        [5.0,3.5,1.3,0.3,"Iris-setosa"],
        [4.5,2.3,1.3,0.3,"Iris-setosa"],
        [4.4,3.2,1.3,0.2,"Iris-setosa"],
        [5.0,3.5,1.6,0.6,"Iris-setosa"],
        [5.1,3.8,1.9,0.4,"Iris-setosa"],
        [4.8,3.0,1.4,0.3,"Iris-setosa"],
        [5.1,3.8,1.6,0.2,"Iris-setosa"],
        [4.6,3.2,1.4,0.2,"Iris-setosa"],
        [5.3,3.7,1.5,0.2,"Iris-setosa"],
        [5.0,3.3,1.4,0.2,"Iris-setosa"],
        [7.0,3.2,4.7,1.4,"Iris-versicolor"],
        [6.4,3.2,4.5,1.5,"Iris-versicolor"],
        [6.9,3.1,4.9,1.5,"Iris-versicolor"],
        [5.5,2.3,4.0,1.3,"Iris-versicolor"],
        [6.5,2.8,4.6,1.5,"Iris-versicolor"],
        [5.7,2.8,4.5,1.3,"Iris-versicolor"],
        [6.3,3.3,4.7,1.6,"Iris-versicolor"],
        [4.9,2.4,3.3,1.0,"Iris-versicolor"],
        [6.6,2.9,4.6,1.3,"Iris-versicolor"],
        [5.2,2.7,3.9,1.4,"Iris-versicolor"],
        [5.0,2.0,3.5,1.0,"Iris-versicolor"],
        [5.9,3.0,4.2,1.5,"Iris-versicolor"],
        [6.0,2.2,4.0,1.0,"Iris-versicolor"],
        [6.1,2.9,4.7,1.4,"Iris-versicolor"],
        [5.6,2.9,3.6,1.3,"Iris-versicolor"],
        [6.7,3.1,4.4,1.4,"Iris-versicolor"],
        [5.6,3.0,4.5,1.5,"Iris-versicolor"],
        [5.8,2.7,4.1,1.0,"Iris-versicolor"],
        [6.2,2.2,4.5,1.5,"Iris-versicolor"],
        [5.6,2.5,3.9,1.1,"Iris-versicolor"],
        [5.9,3.2,4.8,1.8,"Iris-versicolor"],
        [6.1,2.8,4.0,1.3,"Iris-versicolor"],
        [6.3,2.5,4.9,1.5,"Iris-versicolor"],
        [6.1,2.8,4.7,1.2,"Iris-versicolor"],
        [6.4,2.9,4.3,1.3,"Iris-versicolor"],
        [6.6,3.0,4.4,1.4,"Iris-versicolor"],
        [6.8,2.8,4.8,1.4,"Iris-versicolor"],
        [6.7,3.0,5.0,1.7,"Iris-versicolor"],
        [6.0,2.9,4.5,1.5,"Iris-versicolor"],
        [5.7,2.6,3.5,1.0,"Iris-versicolor"],
        [5.5,2.4,3.8,1.1,"Iris-versicolor"],
        [5.5,2.4,3.7,1.0,"Iris-versicolor"],
        [5.8,2.7,3.9,1.2,"Iris-versicolor"],
        [6.0,2.7,5.1,1.6,"Iris-versicolor"],
        [5.4,3.0,4.5,1.5,"Iris-versicolor"],
        [6.0,3.4,4.5,1.6,"Iris-versicolor"],
        [6.7,3.1,4.7,1.5,"Iris-versicolor"],
        [6.3,2.3,4.4,1.3,"Iris-versicolor"],
        [5.6,3.0,4.1,1.3,"Iris-versicolor"],
        [5.5,2.5,4.0,1.3,"Iris-versicolor"],
        [5.5,2.6,4.4,1.2,"Iris-versicolor"],
        [6.1,3.0,4.6,1.4,"Iris-versicolor"],
        [5.8,2.6,4.0,1.2,"Iris-versicolor"],
        [5.0,2.3,3.3,1.0,"Iris-versicolor"],
        [5.6,2.7,4.2,1.3,"Iris-versicolor"],
        [5.7,3.0,4.2,1.2,"Iris-versicolor"],
        [5.7,2.9,4.2,1.3,"Iris-versicolor"],
        [6.2,2.9,4.3,1.3,"Iris-versicolor"],
        [5.1,2.5,3.0,1.1,"Iris-versicolor"],
        [5.7,2.8,4.1,1.3,"Iris-versicolor"],
        [6.3,3.3,6.0,2.5,"Iris-virginica"],
        [5.8,2.7,5.1,1.9,"Iris-virginica"],
        [7.1,3.0,5.9,2.1,"Iris-virginica"],
        [6.3,2.9,5.6,1.8,"Iris-virginica"],
        [6.5,3.0,5.8,2.2,"Iris-virginica"],
        [7.6,3.0,6.6,2.1,"Iris-virginica"],
        [4.9,2.5,4.5,1.7,"Iris-virginica"],
        [7.3,2.9,6.3,1.8,"Iris-virginica"],
        [6.7,2.5,5.8,1.8,"Iris-virginica"],
        [7.2,3.6,6.1,2.5,"Iris-virginica"],
        [6.5,3.2,5.1,2.0,"Iris-virginica"],
        [6.4,2.7,5.3,1.9,"Iris-virginica"],
        [6.8,3.0,5.5,2.1,"Iris-virginica"],
        [5.7,2.5,5.0,2.0,"Iris-virginica"],
        [5.8,2.8,5.1,2.4,"Iris-virginica"],
        [6.4,3.2,5.3,2.3,"Iris-virginica"],
        [6.5,3.0,5.5,1.8,"Iris-virginica"],
        [7.7,3.8,6.7,2.2,"Iris-virginica"],
        [7.7,2.6,6.9,2.3,"Iris-virginica"],
        [6.0,2.2,5.0,1.5,"Iris-virginica"],
        [6.9,3.2,5.7,2.3,"Iris-virginica"],
        [5.6,2.8,4.9,2.0,"Iris-virginica"],
        [7.7,2.8,6.7,2.0,"Iris-virginica"],
        [6.3,2.7,4.9,1.8,"Iris-virginica"],
        [6.7,3.3,5.7,2.1,"Iris-virginica"],
        [7.2,3.2,6.0,1.8,"Iris-virginica"],
        [6.2,2.8,4.8,1.8,"Iris-virginica"],
        [6.1,3.0,4.9,1.8,"Iris-virginica"],
        [6.4,2.8,5.6,2.1,"Iris-virginica"],
        [7.2,3.0,5.8,1.6,"Iris-virginica"],
        [7.4,2.8,6.1,1.9,"Iris-virginica"],
        [7.9,3.8,6.4,2.0,"Iris-virginica"],
        [6.4,2.8,5.6,2.2,"Iris-virginica"],
        [6.3,2.8,5.1,1.5,"Iris-virginica"],
        [6.1,2.6,5.6,1.4,"Iris-virginica"],
        [7.7,3.0,6.1,2.3,"Iris-virginica"],
        [6.3,3.4,5.6,2.4,"Iris-virginica"],
        [6.4,3.1,5.5,1.8,"Iris-virginica"],
        [6.0,3.0,4.8,1.8,"Iris-virginica"],
        [6.9,3.1,5.4,2.1,"Iris-virginica"],
        [6.7,3.1,5.6,2.4,"Iris-virginica"],
        [6.9,3.1,5.1,2.3,"Iris-virginica"],
        [5.8,2.7,5.1,1.9,"Iris-virginica"],
        [6.8,3.2,5.9,2.3,"Iris-virginica"],
        [6.7,3.3,5.7,2.5,"Iris-virginica"],
        [6.7,3.0,5.2,2.3,"Iris-virginica"],
        [6.3,2.5,5.0,1.9,"Iris-virginica"],
        [6.5,3.0,5.2,2.0,"Iris-virginica"],
        [6.2,3.4,5.4,2.3,"Iris-virginica"],
        [5.9,3.0,5.1,1.8,"Iris-virginica"],
    ];

    var panjang = irises.length;

    var wrapper = document.getElementById("dalamtabel");
    var myHTML = '';
    var idd;

    for (var idd = 0; idd < panjang; idd++) {
        myHTML += '<tr><th scope="row">' + (idd+1) + '</th><td>' + irises[idd][0] + '</td><td>' + irises[idd][1] + '</td><td>' + irises[idd][2] + '</td><td>' + irises[idd][3] + '</td><td>' + irises[idd][4] + '</td></tr>';
    }
    wrapper.innerHTML = myHTML;




    function hitung(){
        var sl = document.getElementById("sl").value;
        var sw = document.getElementById("sw").value;
        var pl = document.getElementById("pl").value;
        var pw = document.getElementById("pw").value;
        var K = document.getElementById("k").value;
        var i;
        var olah = [];
        var tombol1 = document.getElementById("apaini2");
        var tombol11='';
        var modaldata = document.getElementById("hahaha2");
        var isinya = '';
        for (i=0;i<irises.length;i++){
            olah.push([Math.sqrt( Math.pow(sl-irises[i][0],2) + Math.pow(sw-irises[i][1],2) + Math.pow(pl-irises[i][2],2) + Math.pow(pw-irises[i][3],2) ),i])
        }
        tombol11 = '<button class="btn btn-dark" type="button" data-toggle="modal" data-target="#datak">Lihat K Data</button>';
        tombol1.innerHTML= tombol11;
        olah.sort(function(a,b){
             return a[0] - b[0];
        });
        
        var ve=0;
        var vi=0;
        var se=0;

        for(i=0;i<K;i++){
            isinya += '<tr><th scope="row">' + (i+1) + '</th><td>' + olah[i][0] + '</td><td>' + olah[i][1] + '</td><td>'  + irises[olah[i][1]][4] + '</td></tr>';
            if( irises[olah[i][1]][4] === "Iris-virginica" ) {
                vi++;
            }
            if( irises[olah[i][1]][4] === "Iris-versicolor" ) {
                ve++;
            }
            if( irises[olah[i][1]][4] === "Iris-setosa" ) {
                se++;
            }
        }
        
        modaldata.innerHTML=isinya;

        if(ve > vi && ve>se ){
            document.getElementById("jawab1").placeholder="Iris-versicolor";
        }
        else if(vi>ve && vi>se){
            document.getElementById("jawab1").placeholder="Iris-virginica";
        }
        else if(se>vi && se> ve){
            document.getElementById("jawab1").placeholder="Iris-setosa";
        }
        else{
            document.getElementById("jawab").placeholder=irises[olah[0][1]][4];
        }

    }

    function tesakurasi(){
        var persen = document.getElementById("persen").value;
        var nilai = [];        
        var total = 0;
        var benar = 0;
        var tabbanding = document.getElementById("hahaha");
        var tabhasil = '';
        var idd;
        var temp;
        var tombol = document.getElementById("apaini");
        var tomboll='';
        for (i=0;i<irises.length;i++){
            nilai[i]= Math.floor(Math.random() * 101);
        }
        tomboll = '<button class="btn btn-dark" type="button" data-toggle="modal" data-target="#modalhasil">Lihat Test Case</button>';

        for (i=0;i<irises.length;i++){
            if(nilai[i]<persen){
                total++;
                temp=olahdata(nilai,persen,i);
                if(irises[i][4]===temp){
                    tabhasil += '<tr><th scope="row">' + total + '</th><td>' + irises[i][0] + '</td><td>' + irises[i][1] + '</td><td>' + irises[i][2] + '</td><td>' + irises[i][3] + '</td><td>' + irises[i][4] + '</td><td>' + temp + '</td></tr>';
                    benar++;
                }
                else{
                    tabhasil += '<tr><th scope="row">' + total + '</th><td>' + irises[i][0] + '</td><td>' + irises[i][1] + '</td><td>' + irises[i][2] + '</td><td>' + irises[i][3] + '</td><td>' + irises[i][4] + '</td><td style="color:red;">' + temp + '</td></tr>';
                }
            }
        }
        
        var hasil=benar/total*100;
        document.getElementById("jawab").placeholder=hasil;
        tabbanding.innerHTML = tabhasil;
        tombol.innerHTML= tomboll;

    }

    function olahdata(nilai,persen,posisi){
        
        var sl = irises[posisi][0];
        var sw = irises[posisi][1];
        var pl = irises[posisi][2];
        var pw = irises[posisi][3];
        var K = document.getElementById("K").value;
        var i;
        var olah = [];
        for (i=0;i<panjang;i++){
            if(nilai[i]>persen){
                olah.push([Math.sqrt( Math.pow(sl-irises[i][0],2) + Math.pow(sw-irises[i][1],2) + Math.pow(pl-irises[i][2],2) + Math.pow(pw-irises[i][3],2) ),i])
            }
        }
        
        olah.sort(function(a,b){
             return a[0] - b[0];
        });
        var ve=0;
        var vi=0;
        var se=0;
        
        
        
        
        for(i=0;i<K;i++){
            if( irises[olah[i][1]][4] === "Iris-virginica" ) {
                vi++;
            }
            if( irises[olah[i][1]][4] === "Iris-versicolor" ) {
                ve++;
            }
            if( irises[olah[i][1]][4] === "Iris-setosa" ) {
            }
        }
       
        if(ve > vi && ve>se ){
            return "Iris-versicolor";
        }
        else if(vi>ve && vi>se){
            return "Iris-virginica";
        }
        else if(se>vi && se> ve){
            return "Iris-setosa";
        }
        else{
            return irises[olah[0][1]][4];
        }
    }
    
</script>

</html>